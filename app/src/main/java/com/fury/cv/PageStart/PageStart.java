package com.fury.cv.PageStart;

import android.content.Intent;
import android.content.SharedPreferences;
import android.graphics.Typeface;
import android.os.Build;
import android.os.Bundle;
import android.os.Handler;
import android.support.annotation.NonNull;
import android.widget.Toast;

import com.fury.cv.R;
import com.fury.cv.adapter.MyDatabaseHelper;
import com.fury.cv.util.PermissionHandler;
import com.fury.cv.view.Page_org;
import com.google.firebase.crash.FirebaseCrash;

import java.util.ArrayList;
import java.util.List;

/**
 * Created by fury on 1/28/2017.
 */
public class PageStart extends AhoyOnboarderActivity {

    SharedPreferences one_play_preferences;
    SharedPreferences.Editor one_play_editor;

    String SCheck;

    MyDatabaseHelper S64_data;

    String b642 = "0";
    String b64 = "0100110101001001010010010100001001001001011010100100000101001110010000100110011101101011011100010110100001101011011010010100011100111001011101110011000001000010010000010101000101000101010001100100000101000001010011110100001101000001010100010011100001000001010011010100100101001001010000100100001101100111010010110100001101000001010100010100010101000001011001110110011001100111010101010111001100101111011000010101100101110111010011100011100101000001010010110101101000101011010100110100101001100010010011000100101001010110011101000110010101001100010000110111000001011000010010100111100001010100011100000110111000110110001100010101011001101011010100100101100001111001011110010111010101001111010000100110011101001000001110010100001101010001010010000100110100110110010100000011100001110110010100110110101001100100011100100100101000110010010001100111101001110010010011100011011100110111010011000101010000101011001101100101011001110111011011110100110101010011011100010011010000101011011001010110010101001001001100000101000001101000010000010111001101001110010010100110101101010000011010010101001101101100011110000101010001110101011101000011000001001101011110000011011101110110010001100111001001111010011101000110100101100101011011100101010101110100001100110100010001001111001101110110111001010111001101100111100000111000011011010011011001111001010001010010111101101000011110100111010001000110010101000100100101110110001101010011001001001110011001100110011100110010011001100101100001000111011101010111101000111000010001100100111001111010011110100110000101011000011011000100101001101011011011110011010101110111011101110110000100110101010100110111001001011001011101100100100000101111010010110011000001010111011001010010111101110101011110000100010101001110011001100111001101000111010011110011100001111000011000100110100101101011011010100011100001101110011001010110101101010110010110100110100001000001001100100111100100110001011010100100001001001001011001100110001001001111011010110101001001001000011011000110010001111010011101100110011101101000001110010110101101100001010000110100011101111001010010000100100001101000010011010100101101010000001101100100110001010000011101000110101001101111010010000110000101100101010010000011011101101001001100110010101100110101010010110111000001000101010010010111010000110101010011100101100000111000011110000111100101001010011011000111001001010100010000110011010001110000010010010110110001100100010101010011001100110110010011000101010101110001011001100110001101000001011011010110000101100111010011100111010100110111011100100110110001010000011101110100101001100010011110000110101000110011010011010011010001001100011001110110110100110100011011110111001001011010010101000110011001001011011010010110001001101100011100100111000100111001010100110011100101010111010100000100110001100011001100110011011101010101011000110101000001101101001010110110111101010001011101000011000100111001001101010111100001010100010101100111100001000010011100110011100101011010011000110110100101110010011101100110011001110111011000010111001001000011010100000111001001100111011101000110101001110111010010010100010001000001010100010100000101000010";
    String b64_1 = "0011010100100101001001010000100100100101101010010000010100111001000010011001110110101101110001011010000110101101101001";///
    String b64_2 = "010001110011100101110111001100000100001001000001010100010100";//
    String b64_3 = "0101010001100100000101000001010011110100001101000001010100010011100001000";//
    String b64_4 = "0010100110101001001010010010100001001000011011001110100101101000011010000010101000101000101010000010110011101100110011001";//
    String b64_5 = "1101010101011100110010111101100001010110010111011101001110001110010100000101001011010110100010101101010011010010100110001001";
    String b64_6 = "001100010010100101011001110100011001010100110001000011";
    String b64_7 = "110000010110000100101001111000010101000111000001101110001";///
    String b64_8 = "10110001100010101011001101011010100100";
    String b64_9 = "1011000011110010111100101110101010011110100001001100111010010000011100101000011010100010100100001001101001101100101000000111000011101100101001101";
    String b64_10 = "10101001100100011100100100101000110010010001100111101001110010010011100011011100110111010011000101";
    String b64_11 = "0000101011001101100101011001110111011011110100110101010011011100010011010000101011011001010";///
    String b64_12 = "1100101010010010011000001010000011010000100000101110011010011100100101001101011010100000110100101010011";
    String b64_13 = "011011000111100001010100011101010111010000";
    String b64_14 = "1100000100110101111000001101110111011001000110011";
    String b64_15 = "10010011110100111010001101001011001010110111001010101011101000011001101000100010011110";
    String b64_16 = "1011101101110010101110011011";///
    String b64_17 = "001111000001110000110110100110110011110010100010100101111011010000111101001110100010001100101010001";
    String b64_18 = "001001011101100011010100110010010011100110011001100111001100100110011001011000";
    String b64_19 = "0001110111010101111010001110000100011001001110011110100111101001100001010110000110110001001010011010110110111100110";///
    String b64_20 = "10101110111011101110110000100110101010100110111001001011001011101100100100000";
    String b64_21 = "1011110100101100110000010101110110010100101111011101010111100001000101010011100110011001110011010001110100111100111000011110";
    String b64_22 = "000110001001101001011010110110101000111000011011100110010101101011010101100101101001101000010000010";
    String b64_23 = "01100100111100100110001011010100100001001001001011001100110001001001111011010110101001001001000011011000110010001111";
    String b64_24 = "010011101100110011101101000001110010110101101100001010000110100011101111001010010000";
    String b64_25 = "100100001101000010011010100101101010000001101100100110001010000";
    String b64_26 = "110011010101001011011100000100010101001001011101000011010101001110010110000011100";///
    String b64_27 = "00111100001111001010010100110110001";
    String b64_28 = "11001001010100010";
    String b64_29 = "000110011010001110000010010010110110001100100010101010011001100110110";
    String b64_30 = "0011000101010101110001011001100110001101000001011011010110000101";///
    String b64_31 = "100111010011100111010100110111011100100110110001010000011101110100101001100010011110000110101000110011010011010011";
    String b64_32 = "01000100110001100111011011010011010001101111011100100101101001010100011001100100101101101001011000100110110001";
    String b64_33 = "11001001110001001110010101001100111001010101110101000001001100011000110011001100110111010101010110001101010000011011010";
    String b64_34 = "0101011011011110101000101110100001100010011100100110101";
    String b64_35 = "11100001010100010101100111100001000010011100110011100101011010011000110110100101110010011101100110011001110111011000010111001001000";///
    String b64_36 = "01101010000011100";
    String b64_37 = "1001100111011101000110101001110111010010010100010001000001010100010100000101000010";



    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        b64_1 = b642 + b64_1;
        b64_7 = b642 + b64_7;
        b64_11 = b642 + b64_11;
        b64_16 = b642 + b64_16;
        b64_19 = b642 + b64_19;
        b64_26 = b642 + b64_26;
        b64_30 = b642 + b64_30;
        b64_35 = b642 + b64_35;

        S64_data = new MyDatabaseHelper(this);

        String input = b64_1 + b64_2 + b64_3 + b64_4 + b64_5 + b64_6 + b64_7 + b64_8 + b64_9 + b64_10 + b64_11 + b64_12 + b64_13 + b64_14 +
                b64_15 + b64_16 + b64_17 + b64_18 + b64_19 + b64_20 + b64_21 + b64_22 + b64_23 + b64_24 + b64_25 + b64_26 + b64_27 + b64_28 +
                b64_29 + b64_30 + b64_31 + b64_32 + b64_33 + b64_34 + b64_35 + b64_36 + b64_37 ;

        S64_data.insertData(b64, "1");

        one_play_preferences = getApplicationContext().getSharedPreferences("PROJECT_NAME", android.content.Context.MODE_PRIVATE);
        one_play_editor = one_play_preferences.edit();

        one_play_editor.putBoolean("coin_play", true);
        one_play_editor.apply();


        String page_1_1 = "CV";
        String page_1_2 = "Welcome to CV Cinema";
        String page_2_1 = "workshop video";
        String page_2_2 = "Anything related to the video here";
        String page_3_1 = "Ticket sale";
        String page_3_2 = "You can get tickets to do things";
        String page_4_1 = "no fee";
        String page_4_2 = "Everything is free";
        String page_5_1 = "";
        String page_5_2 = "Well start now";

        AhoyOnboarderCard ahoyOnboarderCard1 = new AhoyOnboarderCard(page_1_1, page_1_2, R.drawable.sinema);
        AhoyOnboarderCard ahoyOnboarderCard2 = new AhoyOnboarderCard(page_2_1, page_2_2, R.drawable.allwork);
        AhoyOnboarderCard ahoyOnboarderCard3 = new AhoyOnboarderCard(page_3_1, page_3_2, R.drawable.tiketstart);
        AhoyOnboarderCard ahoyOnboarderCard4 = new AhoyOnboarderCard(page_4_1, page_4_2, R.drawable.freeapp);
        AhoyOnboarderCard ahoyOnboarderCard5 = new AhoyOnboarderCard(page_5_1, page_5_2, R.drawable.startapp);

        ahoyOnboarderCard1.setBackgroundColor(R.color.black_transparent);
        ahoyOnboarderCard2.setBackgroundColor(R.color.black_transparent);
        ahoyOnboarderCard3.setBackgroundColor(R.color.black_transparent);
        ahoyOnboarderCard4 .setBackgroundColor(R.color.black_transparent);
        ahoyOnboarderCard5 .setBackgroundColor(R.color.black_transparent);

        List<AhoyOnboarderCard> pages = new ArrayList<>();

        pages.add(ahoyOnboarderCard1);
        pages.add(ahoyOnboarderCard2);
        pages.add(ahoyOnboarderCard3);
        pages.add(ahoyOnboarderCard4 );
        pages.add(ahoyOnboarderCard5 );

        for (AhoyOnboarderCard page : pages) {
            page.setTitleColor(R.color.colorPrimary);
            page.setDescriptionColor(R.color.colorPrimary);
        }

        setFinishButtonTitle("Let's go");

        showNavigationControls(true);
        setGradientBackground();

        Typeface face = Typeface.createFromAsset(getAssets(), "fa_font_1.ttf");
        setFont(face);

        setInactiveIndicatorColor(R.color.grey_app);
        setActiveIndicatorColor(R.color.colorPrimary);

        setOnboardPages(pages);

        if (Build.VERSION.SDK_INT >= 22) {
            new Handler().postDelayed(new Thread() {
                @Override
                public void run() {
                    super.run();
                    checkPermissions();
                }
            }, 1000);
        }


        FirebaseCrash.log("log 1");
        System.gc();
    }


    @Override
    public void onFinishButtonPressed() {

        Intent uou = new Intent(PageStart.this, Page_org.class);
        startActivity(uou);
        PageStart.this.finish();

    }



    private void checkPermissions(){

        String[] per = {android.Manifest.permission.READ_EXTERNAL_STORAGE,android.Manifest.permission.WRITE_EXTERNAL_STORAGE,android.Manifest.permission.READ_PHONE_STATE,android.Manifest.permission.ACCESS_COARSE_LOCATION};

        new PermissionHandler().checkPermission(this, per, new PermissionHandler.OnPermissionResponse() {
            @Override
            public void onPermissionGranted() {
                // permission granted
                // your code
            }

            @Override
            public void onPermissionDenied() {
                // User canceled permission
                Toast.makeText(PageStart.this,"If the application is rejected, the program will be in error!", Toast.LENGTH_LONG).show();
            }
        });


    }


    @Override
    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
        Intent intent = new Intent("PERMISSION_RECEIVER");
        intent.putExtra("requestCode",requestCode);
        intent.putExtra("permissions",permissions);
        intent.putExtra("grantResults",grantResults);
        sendBroadcast(intent);
    }

}
